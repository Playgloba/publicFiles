function getContextPath(){return window.location.pathname.substring(0,window.location.pathname.indexOf("/",2))}function healthexpertSearch(){$("#loader").removeClass("loaded"),$("form[id=healthexpertSearch]").submit(function(e){return!1});var e=getContextPath()+"/healthexperts?searchTerm="+$("#searchTerm").val()+"&postalCode="+$("#postalCode").val()+"&distance="+$("#distance").val();$.ajax({type:"POST",url:e,success:function(a){$("#loader").addClass("loaded"),$(".fac-list").html(a),window.history.pushState("data","Title",e)},error:function(){$("#errorDiv").html("An Error Occurred while searching")}})}function applyFilter(e,a){if(a.checked){$("#loader").removeClass("loaded");var t=getUrlToCall(e);$.ajax({type:"POST",url:t,success:function(e){$("#loader").addClass("loaded"),$(".fac-list").html(e),window.history.pushState("data","Title",t)},error:function(){$("#loader").addClass("loaded"),$(".alert-danger").show(),setTimeout("$('.alert-danger').fadeOut(); ",4e3)}})}else clearFilter(e)}function clearTopFilter(e){$("#loader").removeClass("loaded");var a=e.split(":");clearFilter(a[0].trim()+":"+a[1].trim())}function clearFilter(e){var a=getUrlParameter("numItemsPerPage"),t=getUrlParameter("sort"),l="",r=getUrlParameter("filter").split("::");for(i=0;i<r.length;i++)if(r[i].includes(" AND ")){var o=r[i].split(":")[0],n=r[i].split(":")[1].split(" AND "),c="";for(k=0;k<n.length;k++)o+":"+n[k]!=e&&(c=c.concat(n[k]).concat(" AND "));" AND "==c.substr(c.length-5)&&(c=c.slice(0,-5)),l=l.concat(o+":"+c),i!=r.length-1&&(l=l.concat("::"))}else r[i]!=e&&(l=l.concat(r[i]),i!=r.length-1&&(l=l.concat("::")));if(":"==l.charAt(l.length-1)&&(l=l.slice(0,-2)),null==l||""==l)var s=paginateURLToCall(null,"1",a,t);else s=paginateURLToCall(l,"1",a,t);$.ajax({type:"POST",url:s,success:function(e){$("#loader").addClass("loaded"),$(".fac-list").html(e),window.history.pushState("data","Title",s)},error:function(){$("#loader").addClass("loaded"),$(".alert-danger").show(),setTimeout("$('.alert-danger').fadeOut(); ",4e3)}})}function paginate(e,a,t){$("#loader").removeClass("loaded");var l=paginateURLToCall(getUrlParameter("filter"),e,a,t);$.ajax({type:"POST",url:l,success:function(e){$("#loader").addClass("loaded"),$(".fac-list").html(e),window.history.pushState("data","Title",l)},error:function(){$("#loader").addClass("loaded"),$(".alert-danger").show(),setTimeout("$('.alert-danger').fadeOut(); ",4e3)}})}function paginateURLToCall(e,a,t,l){var r=getContextPath()+"/healthexperts?searchTerm="+getUrlParameter("searchTerm")+"&postalCode="+getUrlParameter("postalCode")+"&distance="+getUrlParameter("distance");return null!=e&&(r=r+"&filter="+e),null!=a&&(r=r.concat("&pageNum=").concat(a)),null!=t&&(r=r.concat("&numItemsPerPage=").concat(t)),null!=l&&(r=r.concat("&sort=").concat(l)),r}function getUrlParameter(e){url=window.location.href,e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(url);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}function getUrlToCall(e){var a=getUrlParameter("searchTerm"),t=getUrlParameter("postalCode"),l=getUrlParameter("distance"),r=getUrlParameter("numItemsPerPage"),o=getUrlParameter("sort"),n=getUrlParameter("filter"),c="";if(null!=n){var s=[],d=n.split("::");for(i=0;i<d.length;i++)s.push(d[i].split(":")[0]);if(s.includes(e.split(":")[0]))for(i=0;i<d.length;i++){var u=d[i].split(":")[0],h=d[i].split(":")[1],g=e.split(":")[0],p=e.split(":")[1];if(u==g){if(!h.split(" AND ").includes(p)){var m=d[i].split(":")[1].concat(" AND ").concat(e.split(":")[1]);c=c.concat(g.concat(":").concat(m))}}else c=c.concat(d[i]);i!=d.length-1&&(c=c.concat("::"))}else c=n.concat("::").concat(e)}else c=e;var f=getContextPath()+"/healthexperts";return null!=a&&(f=f.concat("?searchTerm=").concat(a)),null!=t&&(f=f.concat("&postalCode=").concat(t)),null!=l&&(f=f.concat("&distance=").concat(l)),f=(f=f.concat("&filter=").concat(c)).concat("&pageNum=").concat("1"),null!=r&&(f=f.concat("&numItemsPerPage=").concat(r)),null!=o&&(f=f.concat("&sort=").concat(o)),f}function clearAll(){$("#loader").removeClass("loaded");var e=paginateURLToCall(null,"1",getUrlParameter("numItemsPerPage"),getUrlParameter("sort"));$.ajax({type:"POST",url:e,success:function(a){$("#loader").addClass("loaded"),$(".fac-list").html(a),window.history.pushState("data","Title",e)},error:function(){$("#loader").addClass("loaded"),$(".alert-danger").show(),setTimeout("$('.alert-danger').fadeOut(); ",4e3)}})}